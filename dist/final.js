(()=>{"use strict";var e,r,t,s,a,o,n={479:e=>{e.exports=require("connect-mongo")},8577:e=>{e.exports=require("cors")},818:e=>{e.exports=require("dotenv")},7252:e=>{e.exports=require("express")},2707:e=>{e.exports=require("express-handlebars")},5977:e=>{e.exports=require("express-session")},6037:e=>{e.exports=require("mongoose")},2124:e=>{e.exports=require("mongoose-paginate-v2")},6331:e=>{e.exports=require("nanoid")},1572:e=>{e.exports=require("nodemailer")},8278:e=>{e.exports=require("passport")},4437:e=>{e.exports=require("socket.io")},4441:e=>{e.exports=require("stripe")},8450:e=>{e.exports=require("swagger-jsdoc")},2320:e=>{e.exports=require("swagger-ui-express")},9814:(e,r,t)=>{t.a(e,(async(e,r)=>{try{var s=t(7252),a=t(6037),o=t(479),n=t(5977),i=t(2707),d=t(4437),u=t(4835),c=t(7115),l=t(6864),p=t(8791),m=t(6574),g=t(2289),h=t(4057),y=t(2961),A=t(4490),f=t(855),w=t(1963),b=t(9828),C=t(2899),v=t(8278),_=t(6581),$=t(8450),P=t(2320),E=t(8577),q=e([u,c,l,p,m,y,A]);[u,c,l,p,m,y,A]=q.then?(await q)():q;const k=s();k.use(n({store:o.create({mongoUrl:f.A.mongo_url,dbName:f.A.mongo_db_name}),secret:f.A.secretPass,resave:!0,saveUninitialized:!0})),(0,_.A)(),k.use(v.initialize()),k.use(v.session()),k.use(E({origin:"http://localhost:5173"})),k.use(s.json()),k.use(s.urlencoded({extended:!0})),k.engine("handlebars",i.engine()),k.set("views","./src/views"),k.set("view engine","handlebars"),k.use(s.static("./public"));try{await a.connect(f.A.mongo_url,{dbName:f.A.mongo_db_name}),C.A.info("Conectado a la DB");const e=$({definition:{openapi:"3.0.1",info:{title:"elem Shop | Tienda de ropa",description:"API pensada para una tienda de ropa."}},apis:["./docs/**/*.yaml"]}),r=k.listen(f.A.port,(()=>C.A.info(`Server is up at Port: ${f.A.port} !!`))),t=new d.Server(r);k.use(((e,r,s)=>{e.io=t,s()})),k.use("/",m.A),k.use("/session",g.A),k.use("/api/products",c.A),k.use("/api/carts",l.A),k.use("/api/users",y.A),k.use("/api/payments",A.A),k.use("/products",p.A),k.use("/carts",p.A),k.use("/users",p.A),k.use("/chat",h.A),k.use("/mockingproducts",w.A),k.use("/apidocs",P.serve,P.setup(e)),k.use(b.A),(0,u.A)(t)}catch(e){C.A.error(e.message)}r()}catch(e){r(e)}}),1)},855:(e,r,t)=>{t.d(r,{A:()=>n});var s=t(818);const a=new(require("commander").Command);a.option("--mode <mode>","Modo de ejecución","development"),a.parse();const o=a.opts();console.log(`Env = ${o.mode}`),s.config({path:"production"===o.mode?"./.env.production":"./.env.development"});const n={admin_email:process.env.ADMIN_EMAIL,admin_password:process.env.ADMIN_PASSWORD,mongo_url:process.env.MONGO_URL,mongo_db_name:process.env.MONGODB_NAME,secretPass:process.env.SECRET,clientIDGit:process.env.CLIENT_ID_GITHUB,clientSecretGit:process.env.CLIENT_SECRET_GITHUB,callbackUrlGit:process.env.CLIENT_URL_GITHUB,persistence:process.env.PERSISTENCE,environment:process.env.ENVIRONMENT,port:o.p||process.env.PORT||8080,nodemailer_user:process.env.MAILER_USER,nodemailer_pass:process.env.MAILER_PASS,stripe_key:process.env.STRIPE_KEY,stripePublishableKey:process.env.STRIPE_PUBLIC_KEY}},6581:(e,r,t)=>{t.d(r,{A:()=>l});var s=t(8278);const a=require("passport-local");var o=t(721),n=t(7444);const i=require("passport-github2");var d=t(9617),u=t(855);const c=a.Strategy,l=()=>{s.use("register",new c({passReqToCallback:!0,usernameField:"email"},(async(e,r,t,s)=>{const{first_name:a,last_name:i,email:u,age:c}=e.body;try{if(await o.A.findOne({email:r}))return s(null,!1);const e={first_name:a,last_name:i,email:u,age:c,cart:(await n.A.create({}))._id,password:(0,d.n1)(t)};return s(null,await o.A.create(e))}catch(e){return s(e.message)}}))),s.use("login",new c({usernameField:"email"},(async(e,r,t)=>{try{if(e==u.A.admin_email&&r==u.A.admin_password)return t(null,{email:e,role:"admin",password:r,first_name:"Admin"});const s=await o.A.findOne({email:e});return s&&(0,d.Oj)(s,r)?t(null,s):t(null,!1)}catch(e){return t(e.message)}}))),s.use("github",new i({clientID:u.A.clientIDGit,clientSecret:u.A.clientSecretGit,callbackUrl:u.A.callbackUrlGit},(async(e,r,t,s)=>{try{const e=await o.A.findOne({email:t._json.email});if(e)return s(null,e);const r=await n.A.create({});return s(null,await o.A.create({first_name:t._json.name,last_name:"",email:t._json.email,password:"",cart:r._id}))}catch(e){return s("Error login with Github")}}))),s.serializeUser(((e,r)=>{e.role,r(null,e)})),s.deserializeUser((async(e,r)=>{"admin"==e.role?r(null,e):r(null,await o.A.findById(e._id))}))}},1568:(e,r,t)=>{t.a(e,(async(e,s)=>{try{t.d(r,{A:()=>l});var a=t(7902),o=t(5486),n=t(6331),i=t(1572),d=t(855),u=t(2899),c=e([a]);a=(c.then?(await c)():c)[0];const l={getProductsFromCartController:async(e,r)=>{const t=e.params.cid,s=await a.mx.getAll(t);if(500===s.statusCode)return r.status(s.statusCode).send(s.response.error);r.status(s.statusCode).send(s.response.payload)},deleteFromCartController:async(e,r)=>{const t=e.params.cid,s=await a.mx.delete(t);if(console.log(s),500===s.statusCode)return r.status(s.statusCode).send(s.response.error);r.status(s.statusCode).send(s.response.payload)},updateCartController:async(e,r)=>{const t=e.body.products,s=e.params.cid,o=await a.mx.update(s,t);if(console.log(o),500===o.statusCode)return r.status(o.statusCode).send(o.response.error);r.status(o.statusCode).send(o.response.payload)},createCartController:async(e,r)=>{const t=await a.mx.create();if(500===t.statusCode)return r.status(t.statusCode).send(t.response.error);r.status(t.statusCode).send(t.response)},addProductToCartController:async(e,r)=>{if("admin"===e.session.user.role)return r.status(403).json({status:"error",error:"No puedes comprar productos siendo Admin!"});const t=e.params.cid,s=e.params.pid,o=await a.mx.getAll(t),n=await a.bk.getById(s);if(500===o.statusCode||400===o.statusCode||404===o.statusCode)return r.status(400).json({status:"error",error:o.response.error});if(500===n.statusCode||400===n.statusCode||404===n.statusCode)return r.status(400).json({status:"error",error:n.response.error});if("premium"===e.session.user.role&&n.response.payload.owner===e.session.user.email)return r.status(403).json({status:"error",error:"No puedes comprar tus propios productos!"});const i=await a.mx.addToCart(t,s);if(500===i.statusCode||400===i.statusCode)return r.status(i.statusCode).json({status:"error",error:i.response.error});r.status(i.statusCode).send(i.response.payload)},deleteProductFromCartController:async(e,r)=>{const t=e.params.cid,s=e.params.pid,o=await a.mx.deleteProductFromCartService(t,s);if(500===o.statusCode||400===o.statusCode||404===o.statusCode)return r.status(o.statusCode).send(o.response.error);r.status(o.statusCode).send(o)},updateProductFromCartController:async(e,r)=>{const t=e.params.cid,s=e.params.pid,o=e.body.quantity,n=await a.mx.updateProductFromCartService(t,s,o);if(500===n.statusCode)return r.status(n.statusCode).send(n);r.status(n.statusCode).send(n.response)},purchaseCartController:async(e,r)=>{try{const t=e.params.cid,s=await a.mx.getAll(t);if(null===s)return r.status(404).send({error:`Cart with ID: ${t} was not found`});const c=s.response.payload;let l=c.products,p=[],m=0;for(let e=0;e<c.products.length;e++){let r=await a.bk.getById(c.products[e].product);r=r.response.payload,c.products[e].quantity<=r.stock&&(r.stock-=c.products[e].quantity,await a.bk.update(r._id,r),l=l.filter((r=>r.product._id.toString()!==c.products[e].product._id.toString())),m+=c.products[e].quantity*r.price,p.push({product:r._id,title:r.title,price:r.price,quantity:c.products[e].quantity}))}if(0===p.length)return r.status(400).render("pageError",{error:"Su carrito de compra está vacio"});await a.mx.update(t,l,{returnDocument:"after"});const g=await o.A.create({code:(0,n.nanoid)(),products:p,amount:Math.round(1.2*m),purchaser:e.session.user.email}),h={service:"gmail",auth:{user:d.A.nodemailer_user,pass:d.A.nodemailer_pass}};let y=i.createTransport(h);const A=p.map((e=>`\n        <tr>\n        <td>${e.title} </td>\n        <td>${e.quantity}</td>\n        <td>$ ${e.price*e.quantity}</td>\n        </tr>\n        `)).join("\n");let f=e.session.user.email,w={from:d.A.nodemailer_user,to:f,subject:"[ elem Shop ] Orden de compra",html:`<h1>[Orden de compra] eleM | Tienda de ropa online</h1>\n            <hr />\n            <h2> Usted a realizado una compra en nuestra tienda </h2>\n            <h3>Número de ticket: ${g.code}</h3>\n            <h3>Total de la compra: $ ${g.amount}</h3>\n            <h3>Cantidad de productos: ${g.products.length}</h3>\n            <h3> Detalles de los productos: </h3>\n            <style>\n            table {\n            width: 100%;\n            border-collapse: collapse;\n            margin-top: 20px;\n            }\n            th, td {\n            border: 1px solid #dddddd;\n            text-align: left;\n            padding: 8px;\n            }\n            th {\n            background-color: #f2f2f2;\n            }\n            </style>\n            <table>\n            <thead>\n            <tr>\n            <th>Título</th>\n            <th>Cantidad</th>\n            <th>Total</th>\n            </tr>\n            </thead>\n            <tbody>\n            ${A}\n            </tbody>\n            </table>\n            <hr />\n            <br>\n            <br>\n            Saludos,<br><strong>Equipo de eleM Uruguay.</strong>`};return await y.sendMail(w),u.A.info(`El usuario ${f} a realizado una compra de $ ${g.amount}`),r.status(200).render("checkoutRes",{user:e.session.user,purchaseCode:g.code,noStockProducts:l,purchaseBuyer:g.purchaser,purchaseAmount:g.amount,message:`Mensaje enviado a ${f}.`})}catch(e){return r.status(500).send(e.message)}}};s()}catch(e){s(e)}}))},9879:(e,r,t)=>{t.a(e,(async(e,s)=>{try{t.d(r,{A:()=>c});var a=t(4441),o=t(818),n=t(855),i=t(7902),d=e([i]);i=(d.then?(await d)():d)[0],o.config();const u=new a(n.A.stripe_key),c={createSession:async(e,r)=>{try{const t=e.body.cid,s=(await i.mx.getAll(t)).response.payload;let a=[],o=0;for(let e=0;e<s.products.length;e++){let r=await i.bk.getById(s.products[e].product);r=r.response.payload,s.products[e].quantity<=r.stock&&(o+=s.products[e].quantity*r.price,a.push({description:r.description,title:r.title,price:r.price,quantity:s.products[e].quantity})),s.products[e].quantity>r.stock&&(o+=r.stock*r.price,a.push({description:r.description,title:r.title,price:r.price,quantity:r.stock}))}if(0===a.length)return r.status(400).json({status:"error",error:"No hay productos en el carrito"});const d=a.map((e=>({price_data:{product_data:{name:e.title,description:e.description},currency:"usd",unit_amount:Math.round(100*parseInt(1.2*e.price))},quantity:e.quantity}))),c=await u.checkout.sessions.create({line_items:d,mode:"payment",success_url:"development"===n.A.environment?`http://${e.hostname}:${n.A.port}/api/carts/${t}/purchase`:`http://${e.hostname}/api/carts/${t}/purchase`,cancel_url:"development"===n.A.environment?`http://${e.hostname}:${n.A.port}/api/payments/cancel`:`http://${e.hostname}/api/payments/cancel`});r.status(200).json({sessionId:c.id})}catch(e){console.log(e),r.status(500).json({status:"error",error:e.message})}},failedSession:async(e,r)=>{r.render("payment/errorPay")}};s()}catch(e){s(e)}}))},631:(e,r,t)=>{t.a(e,(async(e,s)=>{try{t.d(r,{A:()=>p});var a=t(7902),o=t(3756),n=t(382),i=t(6398),d=t(1572),u=t(855),c=t(2899),l=e([a]);a=(l.then?(await l)():l)[0];const p={getProducts:async(e,r)=>{const{limit:t=10,page:s=1}=e.query,o={};e.query.category&&(o.category=e.query.category),e.query.stock&&(o.stock=e.query.stock);const n={lean:!0,limit:t,page:s};"asc"===e.query.sort&&(n.sort={price:1}),"des"===e.query.sort&&(n.sort={price:-1});const i=await a.bk.dao.model.paginate(o,n);if(!i)return{statusCode:500,response:{status:"error",error:i}};let d,u;if(e.query.page){const r=e.originalUrl.replace(`page=${e.query.page}`,`page=${i.prevPage}`);d=`http://${e.hostname}:8080${r}`}else d=`http://${e.hostname}:8080${e.originalUrl}&page=${i.prevPage}`;if(e.query.page){const r=e.originalUrl.replace(`page=${e.query.page}`,`page=${i.nextPage}`);u=`http://${e.hostname}:8080${r}`}else u=`http://${e.hostname}:8080${e.originalUrl}&page=${i.nextPage}`;return r.send({statusCode:200,response:{status:"success",payload:i.docs,totalPages:i.totalPages,prevPage:i.prevPage,nextPage:i.nextPage,page:i.page,hasPrevPage:i.hasPrevPage,hasNextPage:i.hasNextPage,previousLink:i.hasPrevPage?d:null,nextLink:i.hasNextPage?u:null}})},getProductByIdController:async(e,r)=>{const t=e.params.pid,s=await a.bk.getById(t);if(500===s.statusCode||400===s.statusCode){try{o.A.createError({name:"Error en busqueda de producto",cause:(0,i.ks)(s.response.payload),message:"No se pudo obtener el producto por su ID",code:n.A.DATABASES_ERROR}),c.A.error("Error al buscar un producto por su ID")}catch(e){c.A.error(e)}r.status(s.statusCode).send(s.response.error)}r.send(s.response.payload)},addProductController:async(e,r)=>{let{title:t,description:s,price:d,code:u,category:l,stock:p,thumbnail:m}=e.body;const g={title:t,description:s,price:d,code:u,category:l,stock:p,thumbnail:m};if(!(t&&s&&d&&u&&l&&p&&m)){const e=o.A.createError({name:"ERROR EN LA CREACIÓN DEL PRODUCTO",cause:(0,i.iG)(g),message:"El producto no se pudo crear debido a que faltan propiedades.",code:n.A.INVALID_TYPES_ERROR});return c.A.error(`El producto ${u} no se pudo crear debido a que faltan propiedades.`),r.status(400).render("pageError",{error:e.message})}{if(e.session.user&&(g.owner=e.session.user.email),(await a.bk.getAll()).response.payload.find((e=>e.code===g.code)))return r.status(400).json({status:"error",error:"El producto con este codigo ya existe!"});const t=await a.bk.create(g);if(500===t.statusCode){const e=o.A.createError({name:"ERROR EN LA CREACIÓN DEL PRODUCTO",cause:(0,i.iG)(g),message:`El producto no se pudo crear debido a que el codigo "${u}" ya existe`,code:n.A.PRODUCT_CODE});return c.A.error(e.message),r.status(t.statusCode).render("pageError",{error:e.message})}c.A.info(`El producto ${g.code} fue creado con éxito por el usuario ${e.session.user.email}`),r.status(t.statusCode).json({status:"success",payload:t})}},updateProductController:async(e,r)=>{const t=e.params.pid;if(!t)return r.status(400).json({status:"error",error:"ID solicitado no disponible"});if("premium"===e.session.user&&(await a.bk.getById(t)).response.payload.owner!==e.session.user.email)return r.status(403).json({status:"error",payload:"No autorizado para editar producto"});const s=e.body,o=(await a.bk.getAll()).response.payload.find((e=>e.code===s.code));if(o&&o._id!==t)return r.status(400).json({status:"error",error:"Ya existe un producto con este codigo!"});const n=await a.bk.update(t,s);if(500===n.statusCode)return r.status(n.statusCode).send(n.response.error);r.status(n.statusCode).send(n)},deleteProductController:async(e,r)=>{const t={service:"gmail",auth:{user:u.A.nodemailer_user,pass:u.A.nodemailer_pass}},s=d.createTransport(t),o=e.params.pid,n=await a.bk.getById(o);if(404===n.statusCode||500===n.statusCode)return r.json({status:"error",error:n.response.error});if("premium"===e.session.user.role&&n.response.payload.owner!==e.session.user.email)return r.status(403).json({status:"error",error:"No autorizado, solo el dueño del producto puede borrarlo!"});if("user"===e.session.user.role)return r.status(403).json({status:"error",error:"No autorizado, solo admin o premium puede utilizar esta funcion"});const i=await a.bk.delete(o);if(500===i.statusCode||400===i.statusCode)return r.status(i.statusCode).json({status:"error",error:"No se pudo borrar el producto"});const c=await a.DL.getOne(n.response.payload.owner);if("error"!==c.response.status&&"premium"===c.response.payload.role){let e={from:u.A.nodemailer_user,to:n.response.payload.owner,subject:"[ elem Shop ] Mensje de aviso!!",html:`<h1>[ IMPORTANTE! ] eleM | Tienda de ropa online</h1>\n            <hr />\n            <p> Nos contactamos con usted para informarle que el siguiente producto fue eliminado del sistema.: <br>\n             <h3>${n.response.payload._id}</h3>\n             <h4>${n.response.payload.title}</h4></p>\n            <p> En caso de cualquier duda, contactese con un administrador! </p>\n            <br>\n            <hr />\n            <br>\n            <br>\n            Saludos,<br><strong>Equipo de eleM Uruguay.</strong>`};await s.sendMail(e)}r.status(i.statusCode).json({status:"success",payload:i})}};s()}catch(e){s(e)}}))},1211:(e,r,t)=>{t.a(e,(async(e,s)=>{try{t.d(r,{A:()=>n});var a=t(7902),o=e([a]);a=(o.then?(await o)():o)[0];const n={getUsers:async(e,r)=>{const t=await a.DL.getAll();r.status(t.statusCode).json({status:"success",payload:t})},deleteUsers:async(e,r)=>{const t=await a.DL.delete();r.status(t.statusCode).json({status:"success",payload:t})},deleteOneUser:async(e,r)=>{const t=e.params.email,s=await a.DL.deleteOne(t);r.status(s.statusCode).json({status:"success",payload:s})},updateRol:async(e,r)=>{const t=e.params.email,s=e.params.rol;e.session.user.email===t&&(e.user.role=e.params.rol);const o=await a.DL.updateRol(t,s);r.status(o.statusCode).json({status:"success",payload:o})},getOneUser:async(e,r)=>{const t=e.params.email,s=await a.DL.getOne(t);r.json(s)}};s()}catch(e){s(e)}}))},2165:(e,r,t)=>{t.a(e,(async(e,s)=>{try{t.d(r,{A:()=>c});var a=t(7902),o=t(5263),n=t(2899),i=t(818),d=t(855),u=e([a]);a=(u.then?(await u)():u)[0],i.config();const c={getProductsViewController:async(e,r)=>{if(!e.user)return r.status(401).render("sessions/welcome");if(!e.session.user)return r.status(401).render("sessions/welcome");const{limit:t=8,page:s=1}=e.query,o={};e.query.category&&(o.category=e.query.category),e.query.stock&&(o.stock=e.query.stock);const n={lean:!0,limit:t,page:s};"asc"===e.query.sort&&(n.sort={price:1}),"des"===e.query.sort&&(n.sort={price:-1});const i=await a.bk.dao.model.paginate(o,n);if(!i)return r.render("pageError",{error:"La pagina que está buscando no existe!"});let u,c;if(e.query.page){const r=e.originalUrl.replace(`page=${e.query.page}`,`page=${i.prevPage}`);u="localhost"==e.hostname?`http://${e.hostname}:${d.A.port}${r}`:`http://${e.hostname}${r}`}else u="localhost"==e.hostname?`http://${e.hostname}:${d.A.port}${e.originalUrl}?page=${i.prevPage}`:`http://${e.hostname}${e.originalUrl}?page=${i.prevPage}`;if(e.query.page){const r=e.originalUrl.replace(`page=${e.query.page}`,`page=${i.nextPage}`);c="localhost"==e.hostname?`http://${e.hostname}:${d.A.port}${r}`:`http://${e.hostname}${r}`}else c="localhost"==e.hostname?`http://${e.hostname}:${d.A.port}${e.originalUrl}?page=${i.nextPage}`:`http://${e.hostname}${e.originalUrl}?page=${i.nextPage}`;const l=[];let p;for(let r=1;r<=i.totalPages;r++){if(e.query.page)if(e.query.page>i.totalPages)p="localhost"==e.hostname?`http://${e.hostname}:${d.A.port}${e.originalUrl}&page=${r}`:`http://${e.hostname}${e.originalUrl}&page=${r}`;else{const t=e.originalUrl.replace(`page=${e.query.page}`,`page=${r}`);p="localhost"==e.hostname?`http://${e.hostname}:${d.A.port}${t}`:`http://${e.hostname}${t}`}else p="localhost"==e.hostname?`http://${e.hostname}:${d.A.port}${e.originalUrl}?page=${r}`:`http://${e.hostname}${e.originalUrl}?page=${r}`;l.push({page:r,link:p})}const m=e.session.user;let g;g="adminCoder@coder.com"===e.user.email?"AdminCoder":e.user._id.toString();const h=await a.mx.getAll(m.cart);return r.render("home",{user:m,userID:g,cartTotal:"adminCoder@coder.com"===e.user.email?0:h.response.payload.products.length,products:i.docs,paginateInfo:{totalPages:l,prevPage:i.prevPage,nextPage:i.nextPage,page:i.page,hasPrevPage:i.hasPrevPage,hasNextPage:i.hasNextPage,previousLink:i.hasPrevPage?u:null,nextLink:i.hasNextPage?c:null}})},getProductByIdViewController:async(e,r)=>{const t=e.params.pid,s=e.session.user;let o;o="adminCoder@coder.com"===e.user.email?"AdminCoder":e.user._id.toString();const i=await a.bk.getById(t);if(500===i.statusCode||404===i.statusCode)return n.A.error(`El usuario ${e.user.email} quiso ver el detalle del producto ${t} y este no existe`),r.status(404).render("pageError",{error:"No pudimos encontrar el producto con este ID!!"});const d=await a.mx.getAll(s.cart);r.status(200).render("productDetail",{product:i.response.payload,user:s,cartTotal:"adminCoder@coder.com"===e.user.email?0:d.response.payload.products.length,userID:o,premium:"premium"===s.role||"admin"===s.role})},getProductsFromCartViewController:async(e,r)=>{const t=e.params.cid,s=await a.mx.getAll(t),o=e.session.user;let i;if(i="adminCoder@coder.com"===e.user.email?"AdminCoder":e.user._id.toString(),500===s.statusCode)return n.A.error(`El usuario ${e.user.email} quiso acceder al carrito ${t} y obtuvo un error`),r.status(s.statusCode).render("pageError",{error:"No pudimos encontrar el carrito con este ID!!"});let u=0;s.response.payload.products.map((e=>u+=e.product.price*e.quantity));let c=1.2*u;const l=await a.mx.getAll(o.cart);let p=d.A.stripePublishableKey;r.status(s.statusCode).render("cart",{user:o,userID:i,stripePublishableKey:p,cartTotal:"adminCoder@coder.com"===e.user.email?0:l.response.payload.products.length,cartProducts:s.response.payload.products,cartId:s.response.payload._id,subTotal:Math.round(u),ship:Math.round(.2*u),amount:Math.round(c)})},getSessionUser:async(e,r)=>{const t=e.session.user;let s;s="adminCoder@coder.com"===e.user.email?"AdminCoder":e.user._id.toString(),"adminCoder@coder.com"===t.email&&(t.role="admin");const n=new o.A(t),i=await a.mx.getAll(t.cart);r.render("sessions/profile",{user:t,cartTotal:"adminCoder@coder.com"===e.user.email?0:i.response.payload.products.length,userID:s,userDTO:n,premium:"premium"===t.role||"admin"===t.role})},getUsers:async(e,r)=>{const t=await a.DL.getAll();let s=t.response.payload.find((r=>r.email===e.session.user.email));s||(s="admin"),e.session.user.role=s.role,r.status(200).render("users",{users:t.response.payload,userLog:e.session.user.email,user:e.session.user})}};s()}catch(e){s(e)}}))},5668:(e,r,t)=>{t.a(e,(async(e,s)=>{try{let e,a,o;if(t.d(r,{KJ:()=>o,Yt:()=>e,Z3:()=>a}),"MONGO"===t(855).A.persistence){const{default:r}=await t.e(181).then(t.bind(t,4181)),{default:s}=await t.e(952).then(t.bind(t,6952)),{default:n}=await t.e(763).then(t.bind(t,8763));e=r,a=s,o=n}s()}catch(e){s(e)}}),1)},7444:(e,r,t)=>{t.d(r,{A:()=>o});var s=t(6037);const a=new s.Schema({products:{type:[{_id:!1,product:{type:s.Schema.Types.ObjectId,ref:"products"},quantity:Number}],default:[]}});s.set("strictQuery",!1);const o=s.model("carts",a)},7317:(e,r,t)=>{t.d(r,{A:()=>o});var s=t(6037);const a=new s.Schema({user:{type:String,required:!0},message:{type:String,required:!0}});s.set("strictQuery",!1);const o=s.model("messages",a)},5486:(e,r,t)=>{t.d(r,{A:()=>o});var s=t(6037);const a=new s.Schema({code:{type:String,unique:!0,required:!0},products:{type:[{_id:!1,product:{type:s.Schema.Types.ObjectId,ref:"products"},price:Number,quantity:Number}]},amount:{type:Number},purchaser:{type:String,ref:"users"}},{timestamps:{createdAt:"purchase_datetime"}});s.set("strictQuery",!1);const o=s.model("tickets",a)},721:(e,r,t)=>{t.d(r,{A:()=>o});var s=t(6037);const a=new s.Schema({first_name:{type:String,required:!0},last_name:{type:String,required:!0},email:{type:String,unique:!0,required:!0},age:{type:Number,required:!0},password:{type:String,required:!0},cart:{type:s.Schema.Types.ObjectId,ref:"carts"},role:{type:String,enum:["user","admin","premium"],default:"user"},documents:[],last_login:{type:Date,default:Date.now}});s.set("strictQuery",!1);const o=s.model("users",a)},5263:(e,r,t)=>{t.d(r,{A:()=>s});class s{constructor(e){this.name=`${e.first_name} ${e.last_name}`,this.email=e.email,this.age=e.age,this.cart=e.cart,this.role=e.role}}},2090:(e,r,t)=>{t.d(r,{YO:()=>d,Zo:()=>u,qv:()=>i});var s=t(382),a=t(2899),o=t(6398),n=t(3756);const i=(e,r,t)=>{if(!e.session.user)return r.redirect("/");t()},d=(e,r,t)=>{if(e.session.user)return r.redirect("/products");t()},u=e=>(r,t,i)=>{if(e.includes("public"))return i();if(!r.session.user){const e=n.A.createError({name:"Error de authenticación",cause:(0,o.cD)("Credenciales no validas."),message:"Verifique que usted esta logueado en la página",code:s.A.AUTHENTICATION});return t.status(401).json({status:"error",error:e})}let d;if("adminCoder@coder.com"===r.session.user.email?(d="admin",r.session.user.cart=""):d=r.session.user.role,!e.includes(d))return a.A.warning(`El usuario ${r.user.email} quiso ingresar a una página que no tiene permisos.`),t.status(403).render("pageError",{error:`El usuario ${r.user.email} no tiene permisos para ingresar a la página.`});i()}},9828:(e,r,t)=>{t.d(r,{A:()=>o});var s=t(2899),a=t(382);const o=(e,r,t,o)=>{switch(e.code){case a.A.INVALID_TYPES_ERROR:case a.A.PRODUCT_CODE:s.A.error(e),t.status(400).send({status:"error",error:e});break;case a.A.AUTHENTICATION:s.A.error(e),t.status(401).send({status:"error",error:e});break;default:s.A.warning(e),t.status(500).send({status:"error",error:e})}}},6864:(e,r,t)=>{t.a(e,(async(e,s)=>{try{t.d(r,{A:()=>u});var a=t(7252),o=t(1568),n=t(2090),i=e([o]);o=(i.then?(await i)():i)[0];const d=(0,a.Router)();d.get("/:cid",o.A.getProductsFromCartController),d.get("/:cid/purchase",o.A.purchaseCartController),d.delete("/:cid",o.A.deleteFromCartController),d.put("/:cid",o.A.updateCartController),d.post("/",o.A.createCartController),d.post("/:cid/product/:pid",(0,n.Zo)(["user","premium"]),o.A.addProductToCartController),d.delete("/:cid/product/:pid",o.A.deleteProductFromCartController),d.put("/:cid/product/:pid",o.A.updateProductFromCartController);const u=d;s()}catch(e){s(e)}}))},4057:(e,r,t)=>{t.d(r,{A:()=>n});var s=t(7252),a=t(2090);const o=(0,s.Router)();o.get("/",a.qv,(0,a.Zo)(["user"]),((e,r)=>{r.render("chat",{user:e.session.user.email})}));const n=o},1963:(e,r,t)=>{t.d(r,{A:()=>n});var s=t(7252),a=t(9617);const o=(0,s.Router)();o.get("/",(async(e,r)=>{const t=[];for(let e=0;e<=50;e++)t.push((0,a.l_)());r.send({status:"success",payload:t})}));const n=o},4490:(e,r,t)=>{t.a(e,(async(e,s)=>{try{t.d(r,{A:()=>d});var a=t(7252),o=t(9879),n=e([o]);o=(n.then?(await n)():n)[0];const i=(0,a.Router)();i.post("/create-checkout-session",o.A.createSession),i.get("/cancel",o.A.failedSession);const d=i;s()}catch(e){s(e)}}))},7115:(e,r,t)=>{t.a(e,(async(e,s)=>{try{t.d(r,{A:()=>u});var a=t(7252),o=t(631),n=t(2090),i=e([o]);o=(i.then?(await i)():i)[0];const d=(0,a.Router)();d.get("/",(0,n.Zo)(["admin","user","premium"]),o.A.getProducts),d.get("/:pid",(0,n.Zo)(["user","admin","premium"]),o.A.getProductByIdController),d.post("/",(0,n.Zo)(["admin","premium"]),o.A.addProductController),d.put("/:pid",(0,n.Zo)(["admin","premium"]),o.A.updateProductController),d.delete("/:pid",(0,n.Zo)(["admin","premium"]),o.A.deleteProductController);const u=d;s()}catch(e){s(e)}}))},2289:(e,r,t)=>{t.d(r,{A:()=>g});var s=t(7252),a=t(8278),o=t(1572),n=t(2899),i=t(9617),d=t(721),u=t(6037);const c=new u.Schema({email:{type:String,ref:"users"},token:{type:String,required:!0},isUsed:{type:Boolean,default:!1},createdAt:{type:Date,default:Date.now,expires:3600}});u.set("strictQuery",!1);const l=u.model("userPasswords",c);var p=t(855);const m=(0,s.Router)();m.post("/register",a.authenticate("register",{failureRedirect:"/session/errorRegister",successRedirect:"/session/registerAccepted"}),(async(e,r)=>{})),m.post("/login",a.authenticate("login",{failureRedirect:"/session/errorLogin"}),(async(e,r)=>{try{e.user||(console.log(e.user),r.status(400).send({status:"error",error:error.message})),"adminCoder@coder.com"==e.user.email?e.session.user={email:e.user.email,role:e.user.role,first_name:e.user.first_name}:e.session.user={first_name:e.user.first_name,last_name:e.user.last_name,email:e.user.email,age:e.user.age,role:e.user.role,cart:e.user.cart},await d.A.findOneAndUpdate({email:e.session.user.email},{last_login:Date.now()}),n.A.info(`Usuario ${e.user.email} ha ingresado con éxito en la web`),r.redirect("/products")}catch(e){n.A.error(e.message)}})),m.get("/logout",(async(e,r)=>{try{await d.A.findOneAndUpdate({email:e.session.user.email},{last_login:Date.now()})}catch(e){r.status(500).render("pageError",{error:e.message})}e.session.destroy((e=>{e?(n.A.error(e),r.status(500).render("pageError")):r.redirect("/")}))})),m.get("/gitCallback",a.authenticate("github",{failureRedirect:"/session/errorLogin"}),(async(e,r)=>{e.session.user=e.user,n.A.info(`Usuario ${e.user.email} ha ingresado con éxito en la web`),r.redirect("/")})),m.get("/github",a.authenticate("github",{scope:["user:email"]}),((e,r)=>{})),m.post("/forget_password",(async(e,r)=>{const t=e.body.email,s=await d.A.findOne({email:t});if(!t)return r.status(400).render("pageError",{error:"No ha ingresado un email valido"});if(!s)return r.status(404).render("pageError",{error:"No existe un usuario con el mail ingresado"});const a=(0,i.kX)(16);await l.create({email:t,token:a});const n={service:"gmail",auth:{user:p.A.nodemailer_user,pass:p.A.nodemailer_pass}};let u;u="production"===p.A.environment?`http://${e.hostname}/reset_password/${a}`:`http://${e.hostname}:${p.A.port}/reset_password/${a}`;let c=o.createTransport(n),m={from:p.A.nodemailer_user,to:t,subject:"[Nueva contraseña] eleM | Tienda de ropa",html:`<h1>[Nueva contraseña] eleM | Tienda de ropa</h1>\n        <hr />\n        Has pedido un reinicio de contraseña. Lo puedes hacer desde el siguiente link: <a href="${u}"\n        >Presione aquí para reiniciar la contraseña</a>\n        <hr />\n        Saludos,<br><strong>Equipo de eleM Uruguay.</strong>`};try{await c.sendMail(m),r.status(200).render("pageAuth",{message:`Mensaje enviado correctamente a ${t} para reiniciar su contraseña`})}catch(e){r.status(500).json({status:"error",error:e.message})}})),m.get("/verify_token/:token",(async(e,r)=>{try{const t=await l.findOne({token:e.params.token}),s=t.email;if(!t)return r.redirect("sessions/forget_password");r.render("sessions/reset_password",{user:s})}catch(e){return r.render("sessions/forget_password")}})),m.post("/reset_password/:user",(async(e,r)=>{try{const t=await d.A.findOne({email:e.params.user});if(!await l.findOne({email:t.email}))return r.status(404).render("pageError",{error:"El token ya fue utilizado o expiró, intente restablecer su contraseña nuevamente!"});if(e.body.newPassword===e.body.confirmPassword){if((0,i.Oj)(t,e.body.newPassword))return r.status(400).render("pageError",{error:"La contraseña no puede ser la misma que ya está utlizando!"});await d.A.findByIdAndUpdate(t._id,{password:(0,i.n1)(e.body.newPassword)}),r.status(200).render("pageAuth",{message:"Se ha creado una nueva contraseña"}),await l.deleteOne({email:e.params.user})}else r.status(400).render("pageError",{error:"Las contraseñas ingresadas no coinciden"})}catch(e){r.status(500).json({status:"error",error:e.message})}}));const g=m},6574:(e,r,t)=>{t.a(e,(async(e,s)=>{try{t.d(r,{A:()=>c});var a=t(7252),o=t(2090),n=t(2165),i=t(2899),d=e([n]);n=(d.then?(await d)():d)[0];const u=(0,a.Router)();u.get("/",o.YO,((e,r)=>{r.render("sessions/welcome")})),u.get("/login",o.YO,((e,r)=>{r.render("sessions/login")})),u.get("/register",o.YO,(async(e,r)=>{r.render("sessions/register")})),u.get("/current",o.qv,n.A.getSessionUser),u.get("/session/error",((e,r)=>r.render("pageError"))),u.get("/session/errorRegister",((e,r)=>{r.render("pageError",{error:"No se pudo registrar al usuario, intente nuevamente o verifique que el usuario ya no esté creado"})})),u.get("/session/errorLogin",((e,r)=>{r.render("pageError",{error:"Verifique que los datos del usuario sean correctos"})})),u.get("/session/registerAccepted",((e,r)=>{i.A.info(`Usuario ${e.user.email} se ha registrado con éxito en la web`),r.render("sessions/registerAccepted")})),u.get("/loggerTest",((e,r)=>{i.A.fatal("Test de logger Fatal"),i.A.error("Test de logger Error"),i.A.warning("Test de logger Warning"),i.A.info("Test de logger Info"),i.A.http("Test de logger Http"),i.A.debug("Test de logger Debug"),r.send("Los test se ejecutaron correctamente")})),u.get("/forget_password",((e,r)=>{r.render("sessions/forget_password")})),u.get("/reset_password/:token",((e,r)=>{r.redirect(`/session/verify_token/${e.params.token}`)}));const c=u;s()}catch(e){s(e)}}))},2961:(e,r,t)=>{t.a(e,(async(e,s)=>{try{t.d(r,{A:()=>l});var a=t(7252),o=t(721),n=t(1211),i=t(2090),d=t(2899),u=e([n]);n=(u.then?(await u)():u)[0];const c=(0,a.Router)();c.get("/premium/:uid",(0,i.Zo)(["premium","user"]),(async(e,r)=>{try{let t=await o.A.findOne({_id:e.params.uid});if(!t)return r.redirect("/");await o.A.findOneAndUpdate({_id:t._id},{role:"user"===t.role?"premium":"user"}),t=await o.A.findOne({_id:e.params.uid}),d.A.info(`El usuario ${t.email} cambió su rol! Ahora es: ${t.role}`),e.session.user.role=t.role,r.status(200).render("pageAuth",{message:"Se actualizó el rol del usuario con éxito, para utilizarlo, cierre sesión e ingrese nuevamente!"})}catch(e){r.status(500).json({status:"error",error:e.message})}})),c.get("/",n.A.getUsers),c.get("/:email",n.A.getOneUser),c.get("/control/addProduct",(0,i.Zo)(["premium","admin"]),(async(e,r)=>{r.render("actions/addProduct",{user:e.session.user})})),c.get("/control/updateProduct",(0,i.Zo)(["premium","admin"]),(async(e,r)=>{r.render("actions/updateProduct",{user:e.session.user})})),c.put("/updateRol/:email/:rol",n.A.updateRol),c.delete("/",n.A.deleteUsers),c.delete("/deleteUser/:email",n.A.deleteOneUser);const l=c;s()}catch(e){s(e)}}))},8791:(e,r,t)=>{t.a(e,(async(e,s)=>{try{t.d(r,{A:()=>u});var a=t(7252),o=t(2165),n=t(2090),i=e([o]);o=(i.then?(await i)():i)[0];const d=(0,a.Router)();d.get("/",n.qv,(0,n.Zo)(["user","admin","premium"]),o.A.getProductsViewController),d.get("/:cid",n.qv,(0,n.Zo)(["user","premium"]),o.A.getProductsFromCartViewController),d.get("/product/:pid",n.qv,(0,n.Zo)(["user","admin","premium"]),o.A.getProductByIdViewController),d.get("/real/realtimeproducts",n.qv,(0,n.Zo)(["user","admin","premium"]),((e,r)=>{r.render("realTimeProducts")})),d.get("/control/data",n.qv,(0,n.Zo)(["admin"]),o.A.getUsers);const u=d;s()}catch(e){s(e)}}))},8774:(e,r,t)=>{t.d(r,{A:()=>s});class s{constructor(e){this.dao=e}getAll=async e=>await this.dao.getAll(e);create=async()=>await this.dao.create();update=async(e,r)=>await this.dao.update(e,r);delete=async e=>await this.dao.delete(e);addToCart=async(e,r)=>await this.dao.addProductToCart(e,r);deleteProductFromCartService=async(e,r)=>await this.dao.deleteProductFromCart(e,r);updateProductFromCartService=async(e,r,t)=>await this.dao.updateProductFromCart(e,r,t)}},3756:(e,r,t)=>{t.d(r,{A:()=>s});class s{static createError({name:e,cause:r,message:t}){const s=new Error;return s.name=e,s.message=t,s.cause=r,s}}},6398:(e,r,t)=>{t.d(r,{cD:()=>o,iG:()=>s,ks:()=>a});const s=e=>`\n    Una o mas propiedades están incompletas o no son válidas.\n    Lista de propiedades obligatorias:\n        - title: Debe ser un String = (${e.title})\n        - description: Debe ser un String = (${e.description})\n        - price: Debe ser un número = (${e.price})\n        - code: Debe ser un código único = (${e.code})\n        - category: Debe ser un String = (${e.category})\n        - stock: Debe ser un número = (${e.stock})\n        - thumbnail: Debe ser un Array = (${e.thumbnail})\n    `,a=e=>`\n        La respuesta del servidor fue: ${e}\n    `,o=e=>`\n        ${e}\n    `},382:(e,r,t)=>{t.d(r,{A:()=>s});const s={ROUTING_ERROR:1,INVALID_TYPES_ERROR:2,DATABASES_ERROR:3,PRODUCT_CODE:4,AUTHENTICATION:5}},7902:(e,r,t)=>{t.a(e,(async(e,s)=>{try{t.d(r,{DL:()=>l,bk:()=>u,mx:()=>c});var a=t(5668),o=t(6651),n=t(8774),i=t(601),d=e([a]);a=(d.then?(await d)():d)[0];const u=new o.A(new a.Yt),c=new n.A(new a.Z3),l=new i.A(new a.KJ);s()}catch(e){s(e)}}))},6651:(e,r,t)=>{t.d(r,{A:()=>s});class s{constructor(e){this.dao=e}getAll=async()=>await this.dao.getAll();getById=async e=>await this.dao.getById(e);create=async e=>await this.dao.create(e);update=async(e,r)=>await this.dao.update(e,r);delete=async e=>await this.dao.delete(e)}},601:(e,r,t)=>{t.d(r,{A:()=>s});class s{constructor(e){this.dao=e}getAll=async()=>await this.dao.getAll();getOne=async e=>await this.dao.getOne(e);delete=async()=>await this.dao.delete();deleteOne=async e=>await this.dao.deleteOne(e);updateRol=async(e,r)=>await this.dao.updateRol(e,r)}},4835:(e,r,t)=>{t.a(e,(async(e,s)=>{try{t.d(r,{A:()=>d});var a=t(7317),o=t(2899),n=t(7902),i=e([n]);n=(i.then?(await i)():i)[0];const d=e=>{e.on("connection",(async r=>{o.A.info(`Nuevo cliente conectado: ${r.id}`);const t=(await n.bk.getAll()).response.payload;r.emit("products",t),r.on("add",(async r=>{await n.bk.create(r);const t=(await n.bk.getAll()).response.payload;e.emit("products",t)})),r.on("delete",(async r=>{await n.bk.delete(r);const t=(await n.bk.getAll()).response.payload;e.emit("products",t)})),r.broadcast.emit("alert");let s=await a.A.find().lean().exec();r.emit("logs",s),r.on("message",(async r=>{await a.A.create(r);let t=await a.A.find().lean().exec();e.emit("logs",t)}))}))};s()}catch(e){s(e)}}))},2899:(e,r,t)=>{t.d(r,{A:()=>i});const s=require("winston");var a=t(818),o=t(855);a.config();const n={levels:{fatal:0,error:1,warning:2,info:3,http:4,debug:5},colors:{fatal:"black",error:"red",warning:"yellow",info:"blue",http:"green",debug:"white"}};s.addColors(n.colors);const i="production"===o.A.environment?s.createLogger({levels:n.levels,transports:[new s.transports.Console({level:"info",format:s.format.combine(s.format.colorize(),s.format.simple())}),new s.transports.File({filename:"errors.log",level:"error",format:s.format.combine(s.format.timestamp(),s.format.json())})]}):s.createLogger({levels:n.levels,transports:[new s.transports.Console({level:"debug",format:s.format.combine(s.format.timestamp(),s.format.colorize(),s.format.simple())})]})},9617:(e,r,t)=>{t.d(r,{n1:()=>o,kX:()=>d,l_:()=>i,Oj:()=>n});const s=require("bcrypt"),a=require("@faker-js/faker"),o=e=>s.hashSync(e,s.genSaltSync(10)),n=(e,r)=>s.compareSync(r,e.password),i=()=>({_id:a.fakerES.database.mongodbObjectId(),title:a.fakerES.commerce.productName(),description:a.fakerES.commerce.productDescription(),price:a.fakerES.commerce.price({min:10,max:150}),code:a.fakerES.commerce.productAdjective(),category:a.fakerES.commerce.department(),stock:a.fakerES.number.int({max:100}),thumbnail:a.fakerES.image.avatar({height:480,width:640})}),d=e=>[...Array(e)].map((()=>(~~(36*Math.random())).toString(36))).join("").toUpperCase()}},i={};function d(e){var r=i[e];if(void 0!==r)return r.exports;var t=i[e]={exports:{}};return n[e](t,t.exports,d),t.exports}d.m=n,e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",r="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",t="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",s=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},d.a=(a,o,n)=>{var i;n&&((i=[]).d=-1);var d,u,c,l=new Set,p=a.exports,m=new Promise(((e,r)=>{c=r,u=e}));m[r]=p,m[e]=e=>(i&&e(i),l.forEach(e),m.catch((e=>{}))),a.exports=m,o((a=>{var o;d=(a=>a.map((a=>{if(null!==a&&"object"==typeof a){if(a[e])return a;if(a.then){var o=[];o.d=0,a.then((e=>{n[r]=e,s(o)}),(e=>{n[t]=e,s(o)}));var n={};return n[e]=e=>e(o),n}}var i={};return i[e]=e=>{},i[r]=a,i})))(a);var n=()=>d.map((e=>{if(e[t])throw e[t];return e[r]})),u=new Promise((r=>{(o=()=>r(n)).r=0;var t=e=>e!==i&&!l.has(e)&&(l.add(e),e&&!e.d&&(o.r++,e.push(o)));d.map((r=>r[e](t)))}));return o.r?u:n()}),(e=>(e?c(m[t]=e):u(p),s(i)))),i&&i.d<0&&(i.d=0)},d.d=(e,r)=>{for(var t in r)d.o(r,t)&&!d.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},d.f={},d.e=e=>Promise.all(Object.keys(d.f).reduce(((r,t)=>(d.f[t](e,r),r)),[])),d.u=e=>e+".final.js",d.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),d.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),a={},o="primera-entrega:",d.l=(e,r,t,s)=>{if(a[e])a[e].push(r);else{var n,i;if(void 0!==t)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var l=u[c];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")==o+t){n=l;break}}n||(i=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,d.nc&&n.setAttribute("nonce",d.nc),n.setAttribute("data-webpack",o+t),n.src=e),a[e]=[r];var p=(r,t)=>{n.onerror=n.onload=null,clearTimeout(m);var s=a[e];if(delete a[e],n.parentNode&&n.parentNode.removeChild(n),s&&s.forEach((e=>e(t))),r)return r(t)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=p.bind(null,n.onerror),n.onload=p.bind(null,n.onload),i&&document.head.appendChild(n)}},(()=>{var e;d.g.importScripts&&(e=d.g.location+"");var r=d.g.document;if(!e&&r&&(r.currentScript&&(e=r.currentScript.src),!e)){var t=r.getElementsByTagName("script");if(t.length)for(var s=t.length-1;s>-1&&(!e||!/^http(s?):/.test(e));)e=t[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),d.p=e})(),(()=>{var e={792:0};d.f.j=(r,t)=>{var s=d.o(e,r)?e[r]:void 0;if(0!==s)if(s)t.push(s[2]);else{var a=new Promise(((t,a)=>s=e[r]=[t,a]));t.push(s[2]=a);var o=d.p+d.u(r),n=new Error;d.l(o,(t=>{if(d.o(e,r)&&(0!==(s=e[r])&&(e[r]=void 0),s)){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;n.message="Loading chunk "+r+" failed.\n("+a+": "+o+")",n.name="ChunkLoadError",n.type=a,n.request=o,s[1](n)}}),"chunk-"+r,r)}};var r=(r,t)=>{var s,a,[o,n,i]=t,u=0;if(o.some((r=>0!==e[r]))){for(s in n)d.o(n,s)&&(d.m[s]=n[s]);i&&i(d)}for(r&&r(t);u<o.length;u++)a=o[u],d.o(e,a)&&e[a]&&e[a][0](),e[a]=0},t=self.webpackChunkprimera_entrega=self.webpackChunkprimera_entrega||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})(),d(9814)})();