"use strict";exports.id=34,exports.ids=[34],exports.modules={30034:(e,t,r)=>{function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(64385),s=r(31792),u={customLabels:{totalDocs:"totalDocs",limit:"limit",page:"page",totalPages:"totalPages",docs:"docs",nextPage:"nextPage",prevPage:"prevPage",pagingCounter:"pagingCounter",hasPrevPage:"hasPrevPage",hasNextPage:"hasNextPage",meta:null},collation:{},lean:!1,leanWithId:!0,limit:10,projection:{},select:"",options:{},pagination:!0,useEstimatedCount:!1,useCustomCountFn:!1,forceCountFn:!1,allowDiskUse:!1,customFind:"find"};function c(e,t,r){e=e||{};var n=t=o(o(o({},u),c.options),t),i=n.collation,a=n.lean,s=n.leanWithId,l=n.populate,p=n.projection,f=n.read,g=n.select,h=n.sort,O=n.pagination,b=n.useEstimatedCount,y=n.useCustomCountFn,v=n.forceCountFn,P=n.allowDiskUse,d=n.customFind,m=o(o({},u.customLabels),t.customLabels),j=u.limit;O&&(j=parseInt(t.limit,10)>0?parseInt(t.limit,10):0);var w,D,x,q,C="function"==typeof r,k=t.options,S=[],E=m.docs,F=m.limit,N=m.nextPage,I=m.page,A=m.pagingCounter,U=m.prevPage,L=m.totalDocs,M=m.totalPages,W=m.hasPrevPage,J=m.hasNextPage,Q=m.meta;if(Object.prototype.hasOwnProperty.call(t,"offset")?x=w=parseInt(t.offset,10):Object.prototype.hasOwnProperty.call(t,"page")?x=((D=parseInt(t.page,10)<1?1:parseInt(t.page,10))-1)*j:(D=1,x=w=0),O||(D=1),O&&(q=!0===v?Object.keys(i).length>0?this.count(e).collation(i).exec():this.count(e).exec():!0===b?this.estimatedDocumentCount().exec():"function"==typeof y?y():Object.keys(i).length>0?this.countDocuments(e).collation(i).exec():this.countDocuments(e).exec()),j){var _=this[d](e,p,k);l&&_.populate(l),_.select(g),_.sort(h),_.lean(a),f&&f.pref&&_.read(f.pref,f.tags),Object.keys(i).length>0&&_.collation(i),O&&(_.skip(x),_.limit(j));try{!0===P&&_.allowDiskUse()}catch(e){console.error("Your MongoDB version does not support `allowDiskUse`.")}S=_.exec(),a&&s&&(S=S.then((function(e){return e.forEach((function(e){e._id&&(e.id=String(e._id))})),e})))}return Promise.all([q,S]).then((function(e){var t=e[0],n=e[1];!0!==O&&(t=n.length);var i,a={[L]:t};void 0!==w&&(a.offset=w,D=Math.ceil((w+1)/j));var s=j>0?Math.ceil(t/j)||1:null;return a[F]=t,a[M]=1,a[I]=D,a[A]=(D-1)*j+1,a[W]=!1,a[J]=!1,a[U]=null,a[N]=null,O&&(a[F]=j,a[M]=s,D>1?(a[W]=!0,a[U]=D-1):1==D&&void 0!==w&&0!==w&&(a[W]=!0,a[U]=1),D<s&&(a[J]=!0,a[N]=D+1)),delete a.false,0==j&&(a[F]=0,a[M]=1,a[I]=1,a[A]=1,a[U]=null,a[N]=null,a[W]=!1,a[J]=!1),i=Q?{[E]:n,[Q]:a}:o({[E]:n},a),C?r(null,i):Promise.resolve(i)})).catch((function(e){return C?r(e):Promise.reject(e)}))}e.exports=function(e){e.statics.paginate=c,e.statics.paginateSubDocs=s},e.exports.PaginationParameters=a,e.exports.paginateSubDocs=s,e.exports.paginate=c},64385:e=>{function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?t(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.query=t.query}var t,n;return t=e,(n=[{key:"booleanOpt",value:function(e){return"string"==typeof e?"true"===e:e}},{key:"optObjectOrString",value:function(e){var t=e[0]&&["{","["].includes(e[0]),r=e[e.length-1]&&["}","]"].includes(e[e.length-1]),n=t&&r;try{return n?JSON.parse(e):e}catch(e){return{}}}},{key:"getQuery",value:function(){var e,t=null===(e=this.query)||void 0===e?void 0:e.query;if(!t)return{};try{return JSON.parse(t)}catch(e){return{}}}},{key:"getOptions",value:function(){if(!this.query)return{};var e={},t=this.query.select,r=this.query.collation,n=this.query.sort,o=this.query.populate,i=this.query.projection,a=this.query.lean,s=this.query.leanWithId,u=this.query.offset,c=this.query.page,l=this.query.limit,p=this.query.customLabels,f=this.query.pagination,g=this.query.useEstimatedCount,h=this.query.useCustomCountFn,O=this.query.forceCountFn,b=this.query.allowDiskUse,y=this.query.read,v=this.query.options;return t&&(e.select=this.optObjectOrString(t)),r&&(e.collation=this.optObjectOrString(r)),n&&(e.sort=this.optObjectOrString(n)),o&&(e.populate=this.optObjectOrString(o)),void 0!==i&&(e.projection=this.optObjectOrString(i)),void 0!==a&&(e.lean=this.booleanOpt(a)),void 0!==s&&(e.leanWithId=this.booleanOpt(s)),u&&(e.offset=Number(u)),c&&(e.page=Number(c)),(l||0==l)&&(e.limit=Number(l)),p&&(e.customLabels=this.optObjectOrString(p)),void 0!==f&&(e.pagination=this.booleanOpt(f)),void 0!==g&&(e.useEstimatedCount=this.booleanOpt(g)),void 0!==h&&(e.useCustomCountFn=this.booleanOpt(h)),void 0!==O&&(e.forceCountFn=this.booleanOpt(O)),b&&(e.allowDiskUse=this.booleanOpt(b)),y&&(e.read=this.optObjectOrString(y)),v&&(e.options=this.getOptions(v)),e}},{key:"get",value:function(){return[r({},this.getQuery()),r({},this.getOptions())]}}])&&o(t.prototype,n),e}();e.exports=i},31792:e=>{function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e.exports=function(e,n,o){function i(e){var n=e.populate,o=e.page,i=void 0===o?1:o,a=e.limit,s=void 0===a?10:a;if(!n)throw new Error("populate is required");var u=(i-1)*s;e.offset=u;var c={skip:u,limit:s};return"string"==typeof n?n=function(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({path:n},c):"object"!=typeof n||Array.isArray(n)||(n=Object.assign(n,c)),e.populate=n,n}function a(e,t){var r,n=t.populate,o=t.offset,i=void 0===o?0:o,a=(t.page,t.limit),s=void 0===a?10:a,u=n.path,c=t.count,l=e[u];if(!l)throw new Error(`Parse error! Cannot find key on result with path ${u}`);var p={docs:l,totalDocs:c||1,limit:s,page:r=Math.ceil((i+1)/s),prevPage:null,nextPage:null,hasPrevPage:!1,hasNextPage:!1},f=s>0?Math.ceil(c/s)||1:null;p.totalPages=f,p.pagingCounter=(r-1)*s+1,r>1?(p.hasPrevPage=!0,p.prevPage=r-1):1==r&&0!==i&&(p.hasPrevPage=!0,p.prevPage=1),r<f&&(p.hasNextPage=!0,p.nextPage=r+1),0==s&&(p.limit=0,p.totalPages=1,p.page=1,p.pagingCounter=1),Object.defineProperty(e,u,{value:p,writable:!1})}var s=n.populate,u=n.read,c=void 0===u?{}:u,l=n.select,p=void 0===l?"":l,f=n.pagination,g=void 0===f||f,h=n.pagingOptions,O=n.projection,b=this.findOne(e,O);return c&&c.pref&&b.read(c.pref,c.tags),p&&b.select(p),new Promise((function(e,t){b.exec().then((function(r){var n=[];if(s&&n.push(n),g&&h)if(Array.isArray(h))h.forEach((function(e){var t=i(e);e.count=r[t.path].length,n.push(t)}));else{var u=i(h);h.count=r[u.path].length,n.push(u)}!function(e,t,r){e.populate(t,r)}(r,n,(function(r,n){if(r)return o(r,null),void t(r);g&&h&&(Array.isArray(h)?h.forEach((function(e){a(n,e)})):a(n,h)),o&&o(null,n),e(n)}))})).catch((function(e){console.error(e.message),o&&o(e,null)}))}))}}};